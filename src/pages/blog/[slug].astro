---
import '../../styles/global.css'
import { BlogDetailPage } from '../../components/BlogDetailPage'
import { writings } from '../../data/site-data'

export function getStaticPaths() {
  return writings.map((writing) => ({
    params: { slug: writing.slug },
    props: { writing },
  }))
}

const { slug } = Astro.params
const { writing } = Astro.props

const title = `${writing.title} | Adam Slaker`
const description = writing.excerpt
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content={description} />
		<meta name="generator" content={Astro.generator} />

		<!-- Open Graph -->
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:type" content="article" />
		<meta property="og:url" content={`https://adamslaker.dev/blog/${slug}`} />
		{writing.headerImage && <meta property="og:image" content={writing.headerImage} />}

		<!-- Twitter -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		{writing.headerImage && <meta name="twitter:image" content={writing.headerImage} />}

		<!-- Article metadata -->
		<meta property="article:published_time" content={writing.publishedAt} />
		{writing.tags.map((tag) => <meta property="article:tag" content={tag} />)}

		<title>{title}</title>

		<!-- Favicon -->
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
	</head>
	<body class="bg-zinc-950 text-zinc-100 font-sans antialiased">
		<BlogDetailPage slug={slug} client:load />
	</body>
</html>
